<!DOCTYPE html>
<html lang="en-US">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="author" content="Faizal Pribadi">
<meta name="description" content="Dependency Injection is the idea that your components (usually structs in go or interfaces based on reflection) should receive their dependencies when being created.
Google introduce wire as dependency injection, and used by google-cloud-platform library.
In here, i will explain a simple case, how to use wire as dependency injection.
//repository.go package repository type ( Repository interface { Query() string } Repo struct{} ) func NewRepository() *Repo { return &amp;Repo{} } func (r *Repo) Query() string { return &quot;SELECT * FROM queries&quot; }  //service.">

<meta property="og:title" content="Dependency Injection With Golang Wire" />
<meta property="og:description" content="Dependency Injection is the idea that your components (usually structs in go or interfaces based on reflection) should receive their dependencies when being created.
Google introduce wire as dependency injection, and used by google-cloud-platform library.
In here, i will explain a simple case, how to use wire as dependency injection.
//repository.go package repository type ( Repository interface { Query() string } Repo struct{} ) func NewRepository() *Repo { return &amp;Repo{} } func (r *Repo) Query() string { return &quot;SELECT * FROM queries&quot; }  //service." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://faizalpribadi.github.io/blog/dependency-injection-with-golang-wire/" />
<meta property="article:published_time" content="2019-08-10T01:29:22&#43;07:00"/>
<meta property="article:modified_time" content="2019-08-10T01:29:22&#43;07:00"/>


<title>


     Dependency Injection With Golang Wire 

</title>
<link rel="canonical" href="https://faizalpribadi.github.io/blog/dependency-injection-with-golang-wire/">
<link rel="manifest" href="https://faizalpribadi.github.io/manifest.json">








<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/styles/default.min.css">




<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Ubuntu+Mono:400,400i,700,700i|Raleway:500">



    
    <link rel="stylesheet" href="https://faizalpribadi.github.io/css/reset.css?t=2019-08-10%2001%3a42%3a38.315974%20%2b0700%20WIB%20m%3d%2b0.033124765">
    <link rel="stylesheet" href="https://faizalpribadi.github.io/css/pygments.css?t=2019-08-10%2001%3a42%3a38.315974%20%2b0700%20WIB%20m%3d%2b0.033124765">
    <link rel="stylesheet" href="https://faizalpribadi.github.io/css/main.css?t=2019-08-10%2001%3a42%3a38.315974%20%2b0700%20WIB%20m%3d%2b0.033124765">
    
        <link rel="stylesheet" href="https://faizalpribadi.github.io/css/override.css?t=2019-08-10%2001%3a42%3a38.315974%20%2b0700%20WIB%20m%3d%2b0.033124765">
    




<link rel="shortcut icon"

    href="https://faizalpribadi.github.io/img/atom.png"

>








</head>


<body lang="en">

<section class="header">
    <div class="container">
        <div class="content">
            
                
                
                
                
                
                    
                
                    
                
                    
                
                
                <a href="https://faizalpribadi.github.io/"><img class="avatar" src="https://faizalpribadi.github.io/img/me.jpg" srcset="https://faizalpribadi.github.io/img/me.jpg 1x"></a>
            
            <a href="https://faizalpribadi.github.io/"><div class="name">Faizal Pribadi</div></a>
            
            <nav>
                <ul>
                    
                        <li class="nav-blog"><a href="https://faizalpribadi.github.io/blog/"><span>Blog</span></a></li>
                    
                        <li class="nav-about"><a href="https://faizalpribadi.github.io/about/"><span>About</span></a></li>
                    
                        <li class="nav-code"><a href="https://faizalpribadi.github.io/code/"><span>Code</span></a></li>
                    
                </ul>
            </nav>
        </div>
    </div>
</section>

<section class="icons">
    <div class="container">
        <div class="content">
        
            <a href="//github.com/faizalpribadi" target="_blank" rel="noopener"><img class="icon" src="https://faizalpribadi.github.io/img/github.svg" alt="github" /></a>
        

        

        

	

        

        

        
            <a href="//linkedin.com/in/faizal-pribadi" target="_blank" rel="noopener"><img class="icon" src="https://faizalpribadi.github.io/img/linkedin.svg" alt="linkedin" /></a>
        

        

        

        
            <a href="//instagram.com/faizal.pribadi" target="_blank" rel="noopener"><img class="icon" src="https://faizalpribadi.github.io/img/instagram.svg" alt="instagram" /></a>
        

        

        

        
            <a href="mailto:faizal.pribadi@gmail.com"><img class="icon" src="https://faizalpribadi.github.io/img/email.svg" alt="email" /></a>
        

        

        
        </div>
    </div>
</section>


<section class="main post non-narrow zero-top-spacing">
    <div class="container">
        <div class="content">
            <div class="front-matter">
                <div class="title-container">
                    <div class="page-heading">

    Dependency Injection With Golang Wire

</div>

                    <div class="initials"><a href="https://faizalpribadi.github.io/">ad</a></div>
                </div>
                <div class="meta">
                    
                    <div class="date" title='Sat Aug 10 2019 01:29:22 WIB'>Aug 10, 2019</div>
                    
                    
		    <div class="reading-time"><div class="middot"></div>2 minutes read</div>
                    
                </div>
            </div>
            <div class="markdown">
                <p>Dependency Injection is the idea that your components <code>(usually structs in go or interfaces based on reflection)</code> should receive their dependencies when being created.</p>

<p>Google introduce <code>wire</code> as dependency injection, and used by google-cloud-platform library.</p>

<p>In here, i will explain a simple case, how to use <code>wire</code> as dependency injection.</p>

<pre><code class="language-go">//repository.go
package repository

type (
	Repository interface {
		Query() string
	}

	Repo struct{}
)

func NewRepository() *Repo {
	return &amp;Repo{}
}

func (r *Repo) Query() string {
	return &quot;SELECT * FROM queries&quot;
}
</code></pre>

<pre><code class="language-go">//service.go
package service

import (
	&quot;github.com/faizalpribadi/practice/app/repository&quot;
)

type (
	Service interface{}
	Svc     struct {
		repo repository.Repository
	}
)

func NewService(repo repository.Repository) *Svc {
	return &amp;Svc{repo: repo}
}

func (s *Svc) GetQuery() string {
	return s.repo.Query()
}
</code></pre>

<pre><code class="language-go">//container.go
//+build wireinject

package container

import (
	&quot;github.com/faizalpribadi/practice/app/repository&quot;
	&quot;github.com/faizalpribadi/practice/app/service&quot;
	&quot;github.com/google/wire&quot;
)

var repositorySet = wire.NewSet(repository.NewRepository, wire.Bind(new(repository.Repository), new(*repository.Repo)))

func NewContainer() *service.Svc {
	wire.Build(repositorySet, service.NewService)
	return &amp;service.Svc{}
}
</code></pre>

<p>after all the code has been created, we will generate <code>wire_gen.go</code> by command from <code>wire</code>:</p>

<pre><code class="language-go">// Code generated by Wire. DO NOT EDIT.

//go:generate wire
//+build !wireinject

package container

import (
	&quot;github.com/faizalpribadi/practice/app/repository&quot;
	&quot;github.com/faizalpribadi/practice/app/service&quot;
	&quot;github.com/google/wire&quot;
)

// Injectors from container.go:

func NewContainer() *service.Svc {
	repo := repository.NewRepository()
	svc := service.NewService(repo)
	return svc
}

// container.go:

var repositorySet = wire.NewSet(repository.NewRepository, wire.Bind(new(repository.Repository), new(*repository.Repo)))
</code></pre>

<p>and the final part is run the code is working as expected.</p>

<pre><code class="language-go">package main

import (
	&quot;fmt&quot;

	&quot;github.com/faizalpribadi/practice/container&quot;
)

func main() {
	c := container.NewContainer()
	fmt.Println(c.GetQuery())
}
</code></pre>

                <br>
                
                <p class="back-to-posts"><a href="https://faizalpribadi.github.io/blog">Back to posts</a></p>
            </div>
            <br>
            <div class="disqus">
                
            </div>
            
        </div>
    </div>
</section>



<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-74736049-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/highlight.min.js"></script>
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/languages/go.min.js"></script>
  

  <script type="text/javascript">
    hljs.initHighlightingOnLoad();
  </script>




<script>
    if('serviceWorker' in navigator) {
        navigator.serviceWorker
            .register('/sw.js', { scope: '/' })
            .then(function(registration) {
                console.log('Service Worker Registered');
            });

        navigator.serviceWorker
            .ready
            .then(function(registration) {
                console.log('Service Worker Ready');
            });
    }
  </script>
</body>
</html>

